!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.textselection=e())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,e,o)=>{t.exports=o("dll-reference CKEditor5.dll")("./src/core.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,o),s.exports}o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";o.d(r,{default:()=>i});var t=o("ckeditor5/src/core.js");class e extends t.Plugin{static get requires(){return["SourceEditing"]}static get pluginName(){return"TextSelection"}constructor(...t){super(...t),this.sourceEditingCursorPosition=-1,console.log("Textselection created.")}setCursorPos(t){console.log("Set cursorPos to:",t),0!==t.path[1]?this.sourceEditingCursorPosition=t:console.log("Skipped ...")}getCursorPos(){return this.sourceEditingCursorPosition}init(){const t=this.editor;t.model.document.on("change",(()=>{this.createAnchor()})),this.listenTo(t.plugins.get("SourceEditing"),"change:isSourceEditingMode",((t,e,o)=>{o&&this.sourceEditingCursorPosition&&this.restoreCursorPosition()}))}saveCursorPosition(){const t=this.editor.model.document.selection.getLastPosition();t?(this.setCursorPos(t),this.convertPosition()):console.error("Position empty")}restoreCursorPosition(){const t=this.editor,e=t.model;this.convertPosition(),this.sourceEditingCursorPosition&&e.change((e=>{const o=t.plugins.get("SourceEditing");if(o&&o.isSourceEditingMode){const e=document.querySelector(".ck-source-editing-area textarea"),o=this.sourceEditingCursorPosition.path[1],r=String(e.value).split("\n");console.log("lines: ",r);let i=0;r.forEach(((t,e)=>{e<this.sourceEditingCursorPosition.path[0]&&(i+=t.length)})),console.log(this.sourceEditingCursorPosition.path,i),e&&(e.setSelectionRange(o+i,o+i+1),t.editing.view.focus())}}))}convertPosition(){const t=this.editor.getData();console.log("Data: ",String(t).split("\n"))}createAnchor(){const t=this.editor;let e=String(t.getData());e=e.replaceAll("ğŸ“Œ",""),t.model.change((e=>{t.model.insertContent(e.createText("ğŸ“Œ"))}))}}const i={Textselection:e}})(),r=r.default})()));