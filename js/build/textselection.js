!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.CKEditor5=o():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.textselection=o())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,o,e)=>{t.exports=e("dll-reference CKEditor5.dll")("./src/core.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},o={};function e(i){var r=o[i];if(void 0!==r)return r.exports;var s=o[i]={exports:{}};return t[i](s,s.exports,e),s.exports}e.d=(t,o)=>{for(var i in o)e.o(o,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})},e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o);var i={};return(()=>{"use strict";e.d(i,{default:()=>r});var t=e("ckeditor5/src/core.js");class o extends t.Plugin{static get requires(){return["SourceEditing"]}static get pluginName(){return"TextSelection"}constructor(...t){super(...t),this.sourceEditingCursorPosition=-1,console.log("Textselection created.")}setCursorPos(t){console.log("Set cursorPos to:",t),0!==t.path[1]?this.sourceEditingCursorPosition=t:console.log("Skipped ...")}getCursorPos(){return this.sourceEditingCursorPosition}init(){const t=this.editor;t.model.document.on("change",(()=>{this.saveCursorPosition()})),this.listenTo(t.plugins.get("SourceEditing"),"change:isSourceEditingMode",((t,o,e)=>{e&&this.sourceEditingCursorPosition&&this.restoreCursorPosition()}))}saveCursorPosition(){const t=this.editor.model.document.selection.getLastPosition();t?(this.setCursorPos(t),this.convertPosition()):console.error("Position empty")}restoreCursorPosition(){const t=this.editor,o=t.model;this.convertPosition(),this.sourceEditingCursorPosition&&o.change((o=>{const e=t.plugins.get("SourceEditing");if(e&&e.isSourceEditingMode){const o=document.querySelector(".ck-source-editing-area textarea"),e=this.sourceEditingCursorPosition.path[1],i=String(o.value).split("\n");console.log("lines: ",i);let r=0;i.forEach(((t,o)=>{o<this.sourceEditingCursorPosition.path[0]&&(r+=t.length)})),console.log(this.sourceEditingCursorPosition.path,r),o&&(o.setSelectionRange(e+r,e+r+1),t.editing.view.focus())}}))}convertPosition(){const t=this.editor.getData();console.log("Data: ",String(t).split("\n"))}createAnchor(){const t=this.editor;let o=String(t.getData());o=o.replaceAll("ğŸ“Œ",""),t.model.change((o=>{t.model.insertContent(o.createText("ğŸ“Œ"))}))}}const r={Textselection:o}})(),i=i.default})()));